<!DOCTYPE html>
<html>
<body>

<h2>Data Parser</h2>
<p>Enter raw data in the text box, or click on parse to view default example</p>

<input id="string" placeholder="Raw Data"></p>
<p>Edit format if needed, click on parse to use default format</p>
<input id="format" value="#EDT#,#EID#,#PDT#,#LAT#,#LONG#,#SPD#,#HEAD#,#ODO#,#LAC#,#CID#,#VIN#,#VBAT#,#SAT#,#ALT#,#CSS#,#IGN#,#ENG#,#OUT1#,#OUT2#,#OUT3#,#OUT4#">
<button type="button" onclick="onCliekFunction()">Parse</button>

<p id="demo"></p>
<p id="reportType"></p>
<p id="deviceID"></p>
<p id="data"></p>
<p id="IDLength"></p>
<p id="JSON"></p>
<p id="CSV_Values"></p>



<script>
var txt = "$SLU352353081543255,06,9704,200425141421,33,200425141421,+1543.2469,+07644.4732,001.3,026,056151,30050,31093,13.579,04.170,27,317,95,1,1,1,0,0,0,19,0,405,0,1,1,1001,14030D00010D0017000100021B0001550001000203270311000128030C00011A030B000101000C0001000013000100002A000100030A00010100120001000010000101000500040000F2DE0002000100*4C";
var ID = ["0001",
"0002",
"0003",
"0004",
"0005",
"0006",
"0007",
"0008",
"0009",
"000A",
"000B",
"000C",
"000D",
"000E",
"000F",
"0010",
"0012",
"0013",
"0016",
"0017",
"001C",
"002A",
"002F",
"0030",
"0031",
"0032",
"0033",
"0034",
"0035",
"0038",
"0039",
"003C",
"003D",
"003E",
"0040",
"0041",
"0042",
"0044",
"0045",
"0046",
"0047",
"0048",
"0049",
"004A",
"004B",
"004C",
"004D",
"0098",
"0099",
"009A",
"009C",
"009D",
"009F",
"00A4",
"00A8",
"00AB",
"00AC",
"00B0",
"00B1",
"00B2",
"00B3",
"00B8",
"00BA",
"00BB",
"00BC",
"00BD",
"00BE",
"021B",
"030A",
"030B",
"030C",
"030D",
"0311",
"0313",
"0314",
"0315",
"0316",
"0317",
"0318",
"031A",
"031B",
"031C",
"031D",
"0323",
"0324",
"0327",
"0328",
"0329",
"032A",
"032B",
"032C",
"032D",
"032E",
"032F",
"0330",
"0331",
"0332",
"0333",
"0334",
"0335",
"0336",
"0337",
"0338",
"0339",
"033A",
"033B",
"033C",
"033D",
"033E",
"033F",
"0340",
"0341",
"0342",
"0343",
"0344",
"046D",
"046E",
"0479",
"047A",
"047B",
"047C",
"047D",
"047E",
"047F",
"0480",
"0481",
"0482",
"0483",
"0484",
"0485",
"0486",
"0487",
"0488",
"0489",
"048A",
"048B",
"048C",
"048D",
"048E",
"048F",
"0490",
"0491",
"0492",
"0493",
"0494",
"0495",
"0496",
"0497",
"0498",
"0499",
"049A",
"049B",
"049C",
"049D",
"049E",
"049F",
"04A0",
"04A1",
"04A2",
"04A3",
"04A4",
"04A5",
"04A6",
"04A7",
"04A8",
"04A9",
"04AA",
"04AB",
"04AC",
"04AD",
"04AE",
"04AF",
"04B0",
"04B1",
"04B2",
"04B3",
"04B4",
"04B5",
"04B6",
"04B7",
"04B8",
"04B9",
"04BA",
"04BB",
"04BC",
"04BD",
"04BE",
"04BF",
"04C0",
"04C1",
"04C2",
"04C3",
"04C4",
"04C5",
"04C6",
"04C7",
"04C8",
"04C9",
"04CA",
"04CB",
"04CC",
"04CD",
"04CE",
"04CF",
"04D0",
"04D1",
"04D2",
"04D3",
"04D4",
"04D5",
"04D6",
"04D7",
"04D8",
"04D9",
"04DA",
"04DB",
"04DC",
"04DD",
"04DE",
"04DF",
"04E0",
"04E1",
"04E2",
"04E3",
"04E4",
"04E5",
"04E6",
"04E7",
"04E8",
"04E9",
"04EA",
"04EB",
"04EC",
"04ED",
"04EE",
"04EF",
"04F0",
"04F1",
"04F2",
"04F3",
"0509",
"050A",
"050B",
"050C",
"0688",
"0689"
];

var parameterName = ["Engine Speed (RPM)",
"Wheel Based Vehicle Speed (kph)",
"Fuel Level (L)",
"Low fuel level",
"Total Vehicle Distance (km)",
"FL Door",
"FR Door",
"Trunk",
"Check Engine",
"Check Oil",
"Coolant fluid",
"Hand Brake",
"FL Seat belt ",
"Airbag",
"Temperature (C)",
"Parking lights",
"Low beam lights",
"High beam lights",
"Hazard lights",
"Brake Switch",
"Fuel Consumption",
"Ignition",
"Key inserted",
"ABS",
"Tyre pressure",
"ESP",
"RR Door",
"RL Door",
"Hood",
"Steering angle",
"Brake preassure",
"STOP",
"Warning",
"Glow plug indicator",
"Engine Total Hours Of Operation",
"Clutch Switch",
"Voltage V",
"AdBlueLevel",
"AxleWeight",
"ACC",
"Brake System",
"EPC",
"FAP",
"Push accelerator",
"FR Seat Belt",
"Engine Started",
"Push Cluch",
"High Resolution Total Vehicle Distance (meters)",
"Accelerator pedal possition",
"Brake pedal position",
"Check SRS light",
"Fuel Gauge Light",
"Trip Distance km",
"Transmission Current Gear",
"Transmission Oil Temperature",
"Parking",
"VSS",
"ABS SENSOR Front Lift",
"ABS SENSOR Front Right",
"ABS SENSOR Raer Lift",
"ABS SENSOR Raer Right",
"Fuel Consumption Accumulator",
"Engine Oil Led on/off",
"Fuel Consumption L/H",
"Engine Oil Temperature",
"Parking Brake Switch",
"Engine Oil Pressure light",
"Engine Coolant Temperature C",
"Ignition State (Starlink)",
"GPS Speed (Starlink)",
"GPS Heading (Starlink)",
"Battery Voltage (Starlink)",
"Fuel Level (%)",
"Gear Status",
"Signal Left",
"Signal Right",
"Lock",
"Unlock",
"Beams Status",
"RR Seat Belt",
"RC Seat Belt",
"RL Seat Belt",
"Signals Status",
"Side Door",
"Reverse",
"Fuel Consumption Cumulative",
"Operating Hours",
"Driving Time Hours",
"Engine At Idle Time Hours",
"Remaining Time To Service",
"Fuel Consumption Momentary",
"Driver ID",
"Container Type",
"Ambient Temp",
"Hydr Oil Temp",
"Brake Oil Temp",
"Hydr Usage Time",
"Load",
"Angle",
"Extension",
"Total Height",
"Load Center",
"Containers Lift",
"Containers Bottom Lift",
"20 inch Containers",
"40 inch Containers",
"30 inch Containers",
"IO Attachment",
"Alighment Combi Foot LR",
"Sequence Combi Legs Left",
"Sequence Combi Legs Right",
"Wheel Speed RF",
"Wheel Speed RR",
"Wheel Speed LF",
"Wheel Speed LR",
"AC",
"FAN",
"Signal1_1",
"Signal2_1",
"Signal3_1",
"Signal4_1",
"Day1",
"Day2",
"Hour1",
"Hour2",
"Minute1",
"Minute2",
"Month1",
"Month2",
"Year1",
"Year2",
"Year3",
"Year4",
"Signal1_2",
"Signal1_3",
"Signal1_4",
"Signal1_5",
"Signal2_2",
"Signal2_3",
"Signal2_4",
"Signal3_2",
"Signal3_3",
"Signal3_4",
"Signal4_2",
"Signal5_1",
"Signal5_2",
"Signal5_3",
"Signal6_1",
"Signal6_2",
"Signal6_3",
"Signal6_4",
"Signal7_1",
"Signal7_2",
"Msg8_1",
"Signal8_2",
"Signal9_1",
"Signal9_2",
"Signal9_3",
"Signal9_4",
"Signal10_1",
"Signal10_2",
"Signal11_1",
"Signal11_2",
"Signal11_3",
"Signal11_4",
"Traction Control",
"Low Wipers",
"High Wipers",
"WD 2",
"WD 4L",
"WD 4H",
"Sound byte",
"Peds in DZ and FCW",
"Headway measurement",
"Speed > 30 HW Active Total Time",
"Speed > 30 HW Not Active Total Time",
"Speed < 30 HW Active Total Time",
"Speed < 30 HW Not Active Total Time",
"Headway warning level",
"Failsafe events",
"Tamper alert",
"TSR warning level",
"Headway valid",
"HW valid time",
"Setpoint Volume Per Area Application Rate",
"Actual Volume Per Area Application Rate",
"Actual Working Width",
"Actual Volume Content",
"Maximum Volume Content",
"Application Total Volume in [L]",
"Total Area",
"Effective Total Distance",
"Effective Total Time",
"Actual Work State",
"Section Control State",
"Actual Condensed Work State (1-16)",
"Actual Condensed Work State (17-32)",
"Actual Condensed Work State (33-48)",
"Actual Condensed Work State (49-64)",
"Actual Product Pressure",
"Setpoint Condensed Work State (1-16)",
"Setpoint Condensed Work State (17-32)",
"Setpoint Condensed Work State (33-48)",
"Setpoint Condensed Work State (49-64)",
"Actual Revolutions Per Time",
"Actual Speed",
"Actual relative connector angle (*1000)",
"Setpoint Mass Per Area Application Rate",
"Actual Mass Per Area Application Rate",
"Setpoint Count Per Area Application Rate",
"Actual Count Per Area Application Rate",
"Actual Mass Content",
"Application Total Mass in [kg]",
"Ineffective Total Distance",
"Setpoint Percentage Application Rate",
"Instantaneous Fuel Consumption per Time",
"Instantaneous Fuel Consumption per Area",
"Element Type Instance",
"Actual Cultural Practice",
"Ambient temperature",
"Wind speed",
"Wind direction",
"Air Humidity",
"Remaining Area",
"Lifetime Total Area",
"Lifetime Effective Total Distance",
"Lifetime Fuel Consumption",
"Actual Percentage Application Rate",
"Setpoint Revolutions specified as count per time",
"Actual Fuel Tank Content",
"Actual Diesel Exhaust Fluid Tank Content",
"Setpoint Speed",
"Lifetime Diesel Exhaust Fluid Consumption",
"Lifetime Engine Hours",
"Actual Engine Torque",
"Ineffective Total Time",
"Apparent Wind Direction",
"Apparent Wind Speed",
"Instantaneous Diesel Exhaust Fluid Consumption per Area",
"Actual Engine Speed",
"Airplane Engaged",
"Forward",
"Amber lamp state",
"Red lamp state",
"Brake Warning Light",
"Glow Plug Warning Light"
];

function onCliekFunction()		//Execute this when Parse is clicked
{
	document.getElementById("JSON").innerHTML = "";
	//If string is entered in the text box, use it else use the default value
	var temp = document.getElementById("string").value;
	if(temp != "")
		txt = temp;
	if(txt.startsWith('$'))
	{
		var res = txt.split(",");
		document.getElementById("deviceID").innerHTML = "Device ID: "+res[0].substring(4);
		var msgFormat = document.getElementById("format").value.split(",");
		for(var i = 0; i < msgFormat.length; i++){
			document.getElementById("JSON").innerHTML += msgFormat[i] +" = "+ res[i+3]+"<br />";
		}
		var canData = res[31].split("*")[0];
	}
	else
		var canData = txt.split(",")[7];
		
	var matchFound = 0;


	if(canData.startsWith("14"))
		document.getElementById("reportType").innerHTML = "Report Type : Periodic Report";
	else if(canData.startsWith("16"))
		document.getElementById("reportType").innerHTML = "Report Type : Ignition OFF";
	canData = canData.substring(2);
	document.getElementById("data").innerHTML = "Can Data: "+canData;

	while(canData.length > 8)		//Do this till there are no more CAN Parameters (Each parameter is of atleast 10 characters)
	for(var i = 0; i < ID.length; i++){
	matchFound = 0;
	if(ID[i] == canData.substring(0,4)){
		var dataLength = parseInt(canData.substring(4,8),16)*2;
		var data = parseInt(canData.substring(8,(8+dataLength)),16);
		var data = parseInt(canData.substring(8,(8+dataLength)),16);
		document.getElementById("JSON").innerHTML += parameterName[i]+" = "+data+"<br />";
		canData = canData.substring(8+dataLength);
		i = ID.length;
		matchFound = 1;
	 }
	 }
	 if(!matchFound) {
		var msgID = canData.substring(0,4)
		var dataLength = parseInt(canData.substring(4,8),16)*2;
		var data = parseInt(canData.substring(8,(8+dataLength)),16);
		document.getElementById("JSON").innerHTML += msgID+" = "+data+"<br />";
		canData = canData.substring(8+dataLength);
		i = ID.length; 
	 }
}

</script>

</body>
</html>
